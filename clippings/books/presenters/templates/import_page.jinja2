{% extends "base.jinja2" %}
{% block title %}{{ data.page_title }}{% endblock %}
{% block body %}
    <main class="container">
        <h1>{{ data.page_title }}</h1>

        <section>
            <form
                    hx-encoding="multipart/form-data"
                    {{ hx_link(data.import_action.url) }}>
                <input
                        name="file"
                        type="file"
                        placeholder="{{ data.import_action.label }}"
                />
                <progress id="progress" value="0" max="100"></progress>
                <input
                        type="submit"
                        value="{{ data.import_action.label }}"
                />
            </form>
            <script>
                htmx.on('#form', 'htmx:xhr:progress', function (evt) {
                    htmx.find('#progress').setAttribute('value', evt.detail.loaded / evt.detail.total * 100)
                });
            </script>
        </section>
    </main>
{% endblock %}
